include() {
  log include "$1"
  if [ -f $1 ]; then
    . $1
  fi
}

. $BUILD_BASE/bin/defaults

export BUILD_LEVEL=${BUILD_LEVEL:-$BUILD_LEVEL_DEFAULT}
export BUILD_TYPE=${BUILD_TYPE:-$BUILD_TYPE_DEFAULT}
export BUILD_APP=${BUILD_APP:-$BUILD_APP_DEFAULT}
export BUILD_TARGET=${BUILD_TARGET:-$BUILD_TARGET_DEFAULT}
export BUILD_CHANNEL=${BUILD_CHANNEL:-$BUILD_CHANNEL_DEFAULT}
export BUILD_SOURCE=${BUILD_SOURCE:-$BUILD_SOURCE_DEFAULT}

include $BUILD_BASE/config/config
include $BUILD_BASE/config/apps/$BUILD_APP.config
include $BUILD_BASE/config/channels/$BUILD_CHANNEL.config
include $BUILD_BASE/config/platforms/$BUILD_PLATFORM.config
include $BUILD_BASE/config/targets/$BUILD_TARGET.config

CHANNEL=""
if [ "$BUILD_CHANNEL" != "default" ]; then
  CHANNEL="${BUILD_CHANNEL}-"
fi

if [ -z "$MOZ_OBJDIR" ]; then
  MOZ_OBJDIR=$BUILD_BASE/build/$BUILD_SOURCE/obj-${BUILD_APP}-${CHANNEL}${BUILD_LEVEL}-${BUILD_TYPE}
  export MOZ_OBJDIR
fi

export XPCOM_DEBUG_BREAK=warn
export MOZCONFIG=$BUILD_BASE/bin/entrymozconfig
export MOZ_PURGE_CACHES=1
